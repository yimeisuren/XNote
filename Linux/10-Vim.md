# Vim编辑器

vi编辑器是Unix系统最初始的编辑器, 在GNU项目将vi编辑器一直到开源世界后, 将其进行一些改进, 并重命名为vim(vi improved)

## vim安装

在Centos7系统中, 使用`yum install -y vim`进行安装

在Ubuntu系统中, 使用`sudo apt-get install vim`进行安装

## vim基础

vim在内存缓冲区中处理数据

+ 未指定文件名或文件不存在, 则开辟一段新的缓冲区域来编辑
+ 指定文件存在, 则将文件的整个内容读入到缓冲区中

vim编辑器有两种操作模式: <u>普通模式和插入模式</u>. 在普通模式下, 输入的按键将会被解释为命令(<u>区分大小写</u>); 在插入模式下则输入文本内容.

<center>vim操作模式的相互转换</center> 

<img src="https://namebucket.oss-cn-beijing.aliyuncs.com/img/%E6%99%AE%E9%80%9A%E6%A8%A1%E5%BC%8F%E5%92%8C%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8F.svg" style="zoom:25%;" />

### 普通模式

+ `方向键`: 上下左右
+ `<PageDown>/<PageUp>`: 向下/上翻页
+ `G`: 移到文本的最后一行
+ `gg`: 移动到文本的第一行
+ `<num> G`: 移动到文本的第`num`行
+ `:`: <u>命令行模式</u>
  + `q`: 如果未修改缓冲区数据, 则可以退出
  + `q!`: 取消对数据的修改并退出, 强制退出
  + `w <filename>`: 将数据保存到一个名为`filename`的文件中
  + `wq`: 保存数据修改并退出

#### 编辑命令

<center>vim编辑命令</center>

| 命令         | 描述                                                         | 拓展使用 |
| ------------ | ------------------------------------------------------------ | -------- |
| `x/<Delete>` | <u>删除</u>当前光标所在位置的字符                            | `2x`     |
| `dd`         | <u>删除</u>当前光标所在<u>行</u>的字符串                     | `5dd`    |
| `dw`         | <u>删除</u>当前光标所在位置的<u>单词</u>                     |          |
| `d$`         | <u>删除</u>当前光标至<u>行尾(`$`)</u>的内容                  |          |
| `J`          | <u>删除</u>当前光标所在行行尾的<u>换行符(即拼接行)</u>       |          |
| `u`          | <u>撤销</u>                                                  |          |
| `a`          | 在当前光标位置后<u>追加数据</u>                              |          |
| `A`          | 在当前光标所在行<u>行尾追加数据</u>                          |          |
| `r <char>`   | 用`<char>`字符替换当前光标所在位置的<u>单个字符</u>          |          |
| `R <text>`   | 用`<text>`覆盖当前光标所在位置的数据, 直到按下esc键(<u>进入到REPLACE模式</u>) |          |

<u>删除命令</u>会将删除数据存放到寄存器中, 使用`p`命令可以取回数据, 搭配使用相当于`剪切 + 粘贴`

#### 复制和粘贴

复制命令和删除命令相类似, 只需要将`d`改为`y`即可. 由于复制不会影响到复制的文本, 因此只有当使用`p`命令进行粘贴之后才能清楚实际复制了什么内容. 当然, 这个问题可以通过<u>可视模式</u>进行解决, 按下`v`键会高亮文本, <u>高亮的内容即为选中的文本</u>

#### 查找和替换

1. 输入`/`, 再输入需要查找的内容(<u>区分大小写</u>), 按下回车键即可查找
2. 找到内容后, 使用`n`可以查看下一个
3. 在<u>命令行模式</u>下才可以使用替换功能, 格式为`:s /<old>/<new>`

<center>替换功能格式</center>

| 格式                   | 功能                                                   |
| ---------------------- | ------------------------------------------------------ |
| `:s /<old>/<new>`      | 从当前光标到文件末尾查找`<old>`并将第一个替换为`<new>` |
| `:s /<old>/<new>/g`    | 将当前光标所在行的`<old>`替换为`<new>`                 |
| `:n,ms /<old>/<new>/g` | 替换从行号`n`到行号`m`之间所有的`<old>`                |
| `:%s /<old>/<new>/g`   | 替换整个文件中所有的`<old>`                            |
| `:%s /<old>/<new>/gc`  | 替换整个文件中所有的`<old>`且每次进行提示确认          |

## Vim其它设置

### 显示行号

1. 输入`vim ~/.vimrc`
2. 在文件中输入`set nu`后, 保存并退出

